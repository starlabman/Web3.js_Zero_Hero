"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ConfluxScanClient = void 0;
const web3_validator_1 = require("web3-validator");
const base_1 = require("./base");
class ConfluxScanClient extends base_1.BaseScan {
    constructor(chainId, apiKey) {
        super(chainId, apiKey);
    }
    async getSourceCode(address) {
        let data = await this.call(address);
        if (data.status === "0") {
            return data;
        }
        const result = data.result[0];
        if ((0, web3_validator_1.isAddress)(result.Implementation)) {
            data = await this.call(result.Implementation);
        }
        if (data.result && data.result[0] && typeof data.result[0] === "object") {
            const compilationTarget = data.result[0].ContractName.split(":");
            data.result[0].ContractName = this.appendExtension(compilationTarget[1] || compilationTarget[0]);
        }
        return data;
    }
}
exports.ConfluxScanClient = ConfluxScanClient;
//# sourceMappingURL=confluxscan.js.map